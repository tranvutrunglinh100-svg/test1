<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chúc Mừng Năm Mới - Bắn Pháo Hoa</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #000428, #004e92);
            height: 100vh;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 50px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 20px #ff00ff, 0 0 40px #00ffff;
            z-index: 10;
            pointer-events: none;
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 20px #ff00ff, 0 0 40px #00ffff; }
            to { text-shadow: 0 0 30px #ffff00, 0 0 60px #ff0000; }
        }
        .info {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.7);
            font-size: 18px;
            z-index: 10;
            text-align: center;
        }
    </style>
</head>
<body>

<canvas id="fireworks"></canvas>

<div class="message">
    CHÚC MỪNG NĂM MỚI 2026<br>
    <span style="font-size: 36px;">Hạnh Phúc - Bình An - Thịnh Vượng</span>
</div>

<div class="info">
    Nhấp chuột hoặc chạm màn hình để bắn pháo hoa!
</div>

<!-- Âm thanh pháo hoa và tiếng nổ -->
<audio id="sound1" preload="auto">
    <source src="https://www.soundjay.com/buttons/firework-boom-1.mp3" type="audio/mpeg">
</audio>
<audio id="sound2" preload="auto">
    <source src="https://www.soundjay.com/buttons/firework-boom-2.mp3" type="audio/mpeg">
</audio>
<audio id="sound3" preload="auto">
    <source src="https://www.soundjay.com/buttons/firework-whistle.mp3" type="audio/mpeg">
</audio>
<audio id="sound4" preload="auto">
    <source src="https://www.soundjay.com/buttons/fireworks-explosion-1.mp3" type="audio/mpeg">
</audio>

<script>
// Code pháo hoa đẹp từ nguồn mở (tác giả: https://codepen.io/whoisryosuke/pen/bGpomX)
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
let fireworks = [];

const sounds = [
    document.getElementById('sound1'),
    document.getElementById('sound2'),
    document.getElementById('sound3'),
    document.getElementById('sound4')
];

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function createFirework(x = random(100, canvas.width - 100)) {
    const colors = [['#ff0000', '#ff8000', '#ffff00'], ['#00ff00', '#00ffff', '#0080ff'], ['#ff00ff', '#8000ff', '#0000ff'], ['#ffffff', '#ff9999', '#99ff99']];
    const colorSet = colors[Math.floor(random(0, colors.length))];
    
    const firework = {
        x: x,
        y: canvas.height,
        targetY: random(100, canvas.height / 3),
        speed: random(2, 5),
        colorSet: colorSet,
        phase: 'launch'
    };
    fireworks.push(firework);
    
    // Phát âm thanh phóng pháo
    sounds[2].currentTime = 0;
    sounds[2].play().catch(() => {});
}

function createParticles(firework) {
    const particleCount = random(80, 150);
    for (let i = 0; i < particleCount; i++) {
        const angle = (Math.PI * 2 * i) / particleCount;
        const velocity = random(3, 8);
        const color = firework.colorSet[Math.floor(random(0, firework.colorSet.length))];
        
        particles.push({
            x: firework.x,
            y: firework.y,
            vx: Math.cos(angle) * velocity,
            vy: Math.sin(angle) * velocity,
            color: color,
            alpha: 1,
            gravity: 0.05,
            friction: 0.98,
            size: random(2, 5)
        });
    }
    
    // Phát tiếng nổ
    const boom = sounds[Math.floor(random(0, 2))];
    boom.currentTime = 0;
    boom.play().catch(() => {});
}

function animate() {
    ctx.fillStyle = 'rgba(0, 0, 20, 0.1)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    fireworks.forEach((fw, index) => {
        if (fw.phase === 'launch') {
            ctx.beginPath();
            ctx.arc(fw.x, fw.y, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#ffffff';
            ctx.fill();

            fw.y -= fw.speed * 2;
            if (fw.y <= fw.targetY) {
                fw.phase = 'explode';
                createParticles(fw);
                fireworks.splice(index, 1);
            }
        }
    });

    particles.forEach((p, i) => {
        p.vy += p.gravity;
        p.vx *= p.friction;
        p.vy *= p.friction;
        p.x += p.vx;
        p.y += p.vy;
        p.alpha -= 0.008;

        if (p.alpha <= 0) {
            particles.splice(i, 1);
        } else {
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(${hexToRgb(p.color)}, ${p.alpha})`;
            ctx.fill();
        }
    });

    requestAnimationFrame(animate);
}

function hexToRgb(hex) {
    const r = parseInt(hex.slice(1, 3), 16);
    const g = parseInt(hex.slice(3, 5), 16);
    const b = parseInt(hex.slice(5, 7), 16);
    return `${r},${g},${b}`;
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

window.addEventListener('click', (e) => {
    createFirework(e.clientX);
});

window.addEventListener('touchstart', (e) => {
    e.preventDefault();
    createFirework(e.touches[0].clientX);
});

// Tự động bắn pháo hoa liên tục
setInterval(() => {
    createFirework();
}, 800);

animate();
</script>

</body>
</html>